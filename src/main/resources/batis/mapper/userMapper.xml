<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="timepill.user.service.impl.UserDAO">

  <select id="login">
  	SELECT 
  		user_id
  		, password
  		, role
  		, user_status
  		, NICKNAME
    FROM users 
    WHERE user_id = #{userId}
  </select>
  <insert id="add">
  	INSERT INTO users (
  		user_id
  		, password
  		, role
  		, email)
  	VALUES (
  		#{userId}
  		, #{password}
  		, 'USER'
  		, #{email})
  </insert>
  <select id="checkId" resultType="String">
  	SELECT COUNT(*) 
  	FROM users 
  	WHERE user_id = #{userId}
  </select>
  <select id="getUserName">
  	SELECT NICKNAME
  	FROM users
  	WHERE user_id = #{userId}
  </select>
  <update id="addUserInfo">
  	UPDATE users 
  	SET
  		NICKNAME = #{nickname}
  		, user_phone = #{userPhone}
  		, user_gender = #{userGender}
  		, user_height = #{userHeight}
  		, user_weight = #{userWeight}
  		, user_birth = #{userBirth}
  	WHERE user_id = #{userId}
  </update>
  <select id="getUserInfo">
  	SELECT user_id
	  	, NICKNAME
	  	, user_phone
	  	, user_gender
	  	, user_height
	  	, user_weight
	  	, user_birth
	  	, email
  	FROM users
  	WHERE user_id = #{userId}
  </select>
  <select id="getUserCarerAt">
  	SELECT user_carer_at
    FROM users
    WHERE user_id = #{userId}
  </select>
  <update id="updateUserInfo">
  	UPDATE users 
  	SET NICKNAME = #{nickname}
	  	, user_phone = #{userPhone}
	  	, user_gender = #{userGender}
	  	, user_height = #{userHeight}
	  	, user_weight = #{userWeight}
	  	, user_birth = #{userBirth}	 	
  	WHERE user_id = #{userId}
  </update>
  <update id="updateCarerInfo">
  	UPDATE users 
  	SET NICKNAME = #{nickname}, user_phone = #{userPhone} 
  	WHERE user_id = #{userId}
  </update>
</mapper>