<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="timepill.kakao.service.KakaoDAO">

<!-- 계정 체크 -->
<select id="duplicateCheckUser" resultType="UserVO">
SELECT
	USER_ID
	, PASSWORD
	, ROLE
	, USER_STATUS
	, NICKNAME
FROM users
WHERE USER_ID = #{userId}
</select>


<!-- 카카오 회원가입 -->
<insert id="insertUser">
INSERT INTO users(
	USER_ID
	, PASSWORD
	, NICKNAME
	, EMAIL
	, ACCESS_TOKEN
) VALUES(
	#{userId}
	, #{nickname}
	, #{password}
	, #{email}
	, #{kakaoToken}
)
</insert>

<!-- 카카오 유저들 알람 가져오기 -->
<select id="selectSchejuleList" resultType="UserVO">
SELECT 
	A.KAKAO_TOKEN
	, B.ALARM_TIME
	, D.START_DATE
	, D.END_DATE
FROM
	users A
		JOIN alarm_set B ON A.USER_ID = B.USER_ID
		JOIN schedule C ON B.ALARM_ID = C.ALARM_ID
		JOIN med_info D ON C.MED_ID = D.MED_ID
</select>
 
</mapper>