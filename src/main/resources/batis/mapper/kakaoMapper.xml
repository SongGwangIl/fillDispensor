<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="timepill.kakao.service.KakaoDAO">

<!-- 계정 체크 -->
<select id="duplicateCheckUser" resultType="UserVO">
SELECT
	user_id
	, password
	, role
	, user_status
	, user_name AS NICKNAME
FROM users
WHERE USER_ID = #{userId}
</select>


<!-- 회원가입 -->
<insert id="insertUser">
INSERT INTO users(
	USER_ID
	, USER_NAME
	, PASSWORD
	, EMAIL
	, ACCESS_TOKEN
) VALUES(
	#{userId}
	, #{userName}
	, #{password}
	, #{email}
	, #{kakaoToken}
)
</insert>

<!-- 카카오 유저들 알람 가져오기 -->
<select id="selectSchejuleList" resultType="UserVO">
SELECT 
	A.KAKAO_TOKEN
	, B.ALARM_TIM
	, D.START_DATE
	, D.END_DATE
FROM
	users A
		JOIN alarm_set B ON A.USER_ID = B.USER_ID
		JOIN alarm_reg C ON B.ALARM_ID = C.ALARM_ID
		JOIN presc_med_info D ON C.PRESC_MED_ID = D.PRESC_MED_ID
</select>
 
</mapper>